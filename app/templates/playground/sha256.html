{% extends 'base.html' %}
{% block title %}SHA-256{% endblock %}
{% block content %}
<h2 class="mb-3 text-gradient">SHA-256</h2>
<form method="post">
  {{ form.hidden_tag() }}
  <div class="mb-3">{{ form.text.label(class="form-label") }} {{ form.text(class="form-control", rows="6") }}</div>
  {{ form.submit(class="btn btn-gradient") }}
</form>

{% if digest %}
  <hr class="my-4">
  <h5>Хэш (hex)</h5>
  <div class="position-relative">
    <button class="btn btn-soft btn-sm copy-btn" data-target="#sha256Hex">
      <i class="bi bi-clipboard"></i> Копировать
    </button>
    <pre id="sha256Hex" class="result-box">{{ digest }}</pre>
  </div>
  <script>
    document.querySelectorAll('.copy-btn').forEach(b=>b.onclick=async()=>{
      const t=document.querySelector(b.dataset.target).innerText;
      try{await navigator.clipboard.writeText(t);const o=b.innerHTML;b.innerHTML='Скопировано';setTimeout(()=>b.innerHTML=o,1200);}catch(e){}
    });
  </script>
{% endif %}
{% endblock %}
